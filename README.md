# Disclaimer
If you use these scripts for a video, please give credit

You are not allowed to adapt the code of these scripts to other scripts or publish them as your own scripts

# Scripts
## dumper.ts
Dump MasterData and wordings, dumped data will be saved to "/sdcard/pjsekai_dumps"

A button to start dumping will be added to the option dialog

![image](https://github.com/user-attachments/assets/b95c522b-9ebe-4761-8f73-721c9b37bafa)

By default, the script will dump MasterMusicAlls, MasterEventStories, MasterSpecialStoryMap and MasterUnitStoryEpisodeAll

You can easily change the dump targets by changing targetDataNameArray in the script

![image](https://github.com/user-attachments/assets/28fef10a-9dcd-4ba5-898b-5cf98fd9784c)

## logger.ts
Trace Unity log functions and loading of asset bundles

![image](https://github.com/user-attachments/assets/93d0e922-24d0-41ad-bfa6-3532bd9768e5)

## mv-fixed-camera.ts

![Screenshot_2025 03 25_04 07 30 921](https://github.com/user-attachments/assets/e34d21c3-00f4-458e-abc0-852615ea54e4)

## mv-character-camera.ts

- First Person

  ![Screenshot_2025 05 27_22 56 52 202](https://github.com/user-attachments/assets/4176f90a-ea9f-41b9-8cfa-f9e6e4211881)
  
  ![Screenshot_2025 05 27_22 57 19 618](https://github.com/user-attachments/assets/7bb2363f-a69b-4e08-96e5-aa91adbe5da0)

---

- Third Person

  ![out](https://github.com/user-attachments/assets/4b435987-d596-419e-88d2-48367a448349)

On Android, you can switch the target by pressing the back button

## Options
Some options for fixed and character camera are provided

You can change those from the option dialog

A button to open the option dialog will be added to the deck edit screen of music video

---

The button:

![image](https://github.com/user-attachments/assets/482c7145-bda5-44cb-8436-25df01fdb0b0)

---

The option dialog:

![Screenshot_2025 06 11_00 45 19 925](https://github.com/user-attachments/assets/cc114b82-c50c-4995-a686-78e2b1c47934)

---

Here are the explanations for these options:

---

- Mode
  
  You can choose between first person and third person

- Change FOV

  As the name suggests

- Target FOV

  Specify the fov value that will be applied when Change FOV is enabled

- Remove MeshOff tracks

  In some MV, characters may become disappeared due to staging

  This option prevents it

---

## lib/mv-utils.ts
Library used in fixed and character camera

There are some options value for users:

---

- reverseTargetJudge
  
  By default, this script removes all tracks except for the ones in the targets array, set this to true to remove the tracks in the targets array instead

  For example, if you want to keep post-processing but don't want DoF, set this true and target array to `['"Main Camera"', '"Sekai Dof Track"']`

---

For reverseTargetJudge and Remove Meshoff tracks option please note that they might not work

This is because the script will remove tracks with a specific name, but the track supposed to remove may have a different name, so in that case it has no effect

## misc/
There are some scripts in the folder:
- Custom Live (custom-live.ts)

  Create a custom live boot data and load it

  You can edit the live boot data as you like in the code

  A button to start playing will be added to the live screen layer

  You can see MasterMusicAlls.json generated by dumper.ts to check music ids

  https://github.com/user-attachments/assets/d4215c39-e8d6-4a60-a681-fac9c4ae7149

---

- Play scenario (play-scenario.ts, play-special-scenario.ts)

  A button to start playing will be added to the story category select screen layer

  Special stories are, for example, April Fool's Day or anniversary stories

  You can change the assetbundle name or the story id to play in the script

  You can see MasterEventStories.json, MasterSpecialStoryMap.json and MasterUnitStoryEpisodeAll.json to check assetbundle names or ids

  https://github.com/user-attachments/assets/ecca1c45-7b5f-48a3-b8ac-275f65c6063f

---

- Automatically retires at the end of the live to prevent sending abnormal data to the server (auto-retire.ts)

  ![out](https://github.com/user-attachments/assets/712aa0b6-f172-4413-b464-b5ae287e0d6b)

---
  
- Supress Google Play Games authentication prompt (supress-playgames-auth.ts)

  ![Screenshot_2025 03 25_04 21 16 187](https://github.com/user-attachments/assets/05a01dbc-8b8e-45b6-9152-d9f3f767a356)

---

- Make all notes flick and critical (make-all-notes-flick-and-critical.ts)

  https://github.com/user-attachments/assets/966f707d-e724-4e58-a992-54a559b4f2ca

---

- playground.ts

  There are some code snippets, like injecting custom chart, fake gacha

# How to use
## Requirements
- Node.js
- Frida
- Basic knowledge of how to use frida

---

1. Clone this repo, enter the folder and run this command:
```
npm install
```
2. Install specific version of frida using requirements.txt
```
pip install -r requirements.txt
```
3. After finished, you can get started with this command:
```
frida -U -N com.sega.pjsekai -l the_script_you_want_to_use.ts
```

---

# Notes
I have not tested these scripts in the English version, but they will probably work

Tips: If you want to use scripts with frida gadget with script interaction, you must downgrade frida-il2cpp-bridge to 0.9.1, otherwise it won't work
